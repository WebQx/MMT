###########################################
# MMT Backend .env.example (Docker Compose)
# Copy to .env and adjust secrets before production.
###########################################

# Core Environment
ENV=dev
APP_VERSION=0.3.0
ALLOW_GUEST_AUTH=1        # Set 0 in prod if guest access disabled
RATE_LIMIT_PER_MINUTE=120
CORS_ALLOW_ORIGINS=*

# Auth / Tokens
GUEST_SECRET=guestsecret  # Change in prod
INTERNAL_JWT_SECRET=change_me_to_a_long_random_string_at_least_40_chars

# Optional Keycloak (uncomment/use if enabling)
# KEYCLOAK_ISSUER=https://auth.example.com/realms/main
# KEYCLOAK_PUBLIC_KEY=-----BEGIN PUBLIC KEY-----\n...\n-----END PUBLIC KEY-----
# KEYCLOAK_JWKS_URL=https://auth.example.com/realms/main/protocol/openid-connect/certs

# OpenAI (if cloud transcription uses it)
# Prefer keeping the key in secrets; these fallbacks support *_FILE and WHISPER aliases.
OPENAI_API_KEY=sk-your-openai-api-key
# WHISPER_API_KEY=
# OPENAI_API_KEY_FILE=/var/run/secrets/openai/api_key
# WHISPER_API_KEY_FILE=/var/run/secrets/openai/api_key

# Transcription Models / Features
WHISPER_MODEL_SIZE=base
ENABLE_CLOUD_TRANSCRIPTION=true
ENABLE_LOCAL_TRANSCRIPTION=false   # Keep false in Docker unless model weights mounted
ENABLE_PARTIAL_STREAMING=false

# RabbitMQ / Redis (docker-compose internal hostnames)
RABBITMQ_URL=amqp://guest:guest@rabbitmq:5672/
REDIS_URL=redis://redis:6379/0

# OpenEMR FHIR (optional integration)
OPENEMR_FHIR_BASE_URL=http://openemr:80
OPENEMR_FHIR_CLIENT_ID=mmt_client
OPENEMR_FHIR_CLIENT_SECRET=mmt_secret
OPENEMR_FHIR_USERNAME=admin
OPENEMR_FHIR_PASSWORD=pass
OPENEMR_SITE=default

# Security Headers / CSP
CSP_POLICY=default-src 'self'; connect-src 'self' http://localhost:8000 ws://localhost:8000; img-src 'self' data:; style-src 'self' 'unsafe-inline'; script-src 'self' 'unsafe-inline'

# Sentry (optional)
# SENTRY_DSN=

# Advanced (uncomment if needed)
# REDIS_URL=redis://redis:6379/0
# ENABLE_FIELD_ENCRYPTION=false
# ENCRYPTION_KEYS=
# PRIMARY_ENCRYPTION_KEY_ID=

# Vault / RSA (optional)
# USE_RSA_INTERNAL_JWT=false
# VAULT_ADDR=
# VAULT_RSA_SECRET_PATH=

# END OF FILE
